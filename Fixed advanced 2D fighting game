
<!DOCTYPE html>
<html>
<head>
<title>2D Fighting Game - Advanced</title>
<style>
body {margin:0; background:#111; color:white; font-family:Arial; text-align:center;}
canvas {background:#222; display:block; margin:20px auto; border:2px solid #fff;}
button {padding:10px 20px; font-size:16px; cursor:pointer;}
</style>
</head>
<body>

<h1>2D Fighting Game</h1>
<button onclick="startGame()">Start Game</button>

<canvas id="game" width="600" height="300"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
let player1, player2, keys = {}, gameInterval;

function startGame() {
    player1 = {x:50, y:200, w:40, h:60, health:100, color:"red"};
    player2 = {x:510, y:200, w:40, h:60, health:100, color:"blue"};
    keys = {};
    if(gameInterval) clearInterval(gameInterval);
    gameInterval = setInterval(gameLoop, 50);
}

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function gameLoop() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // movement
    if(keys["w"]) player1.y -=5;
    if(keys["s"]) player1.y +=5;
    if(keys["a"]) player1.x -=5;
    if(keys["d"]) player1.x +=5;
    if(keys["ArrowUp"]) player2.y -=5;
    if(keys["ArrowDown"]) player2.y +=5;
    if(keys["ArrowLeft"]) player2.x -=5;
    if(keys["ArrowRight"]) player2.x +=5;

    // attack
    if(keys["f"] && collide(player1,player2)) player2.health -=2;
    if(keys["g"] && collide(player1,player2)) player2.health -=4;
    if(keys["k"] && collide(player2,player1)) player1.health -=2;
    if(keys["l"] && collide(player2,player1)) player1.health -=4;

    draw(player1);
    draw(player2);

    // health bars
    ctx.fillStyle="grey";
    ctx.fillRect(20,10,200,20);
    ctx.fillStyle="red";
    ctx.fillRect(20,10,player1.health*2,20);

    ctx.fillStyle="grey";
    ctx.fillRect(canvas.width-220,10,200,20);
    ctx.fillStyle="blue";
    ctx.fillRect(canvas.width-220,10,player2.health*2,20);

    if(player1.health<=0 || player2.health<=0) {
        alert(player1.health<=0 ? "Player 2 Wins!" : "Player 1 Wins!");
        clearInterval(gameInterval);
    }
}

function draw(p) {
    ctx.fillStyle = p.color;
    ctx.fillRect(p.x,p.y,p.w,p.h);
}

function collide(p1,p2) {
    return p1.x < p2.x + p2.w &&
           p1.x + p1.w > p2.x &&
           p1.y < p2.y + p2.h &&
           p1.y + p1.h > p2.y;
}
</script>

</body>
</html>
